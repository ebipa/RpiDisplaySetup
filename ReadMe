This package setups up for Raspberry PI 7" touchscreen display
and also for HDMI display on HDMI 0 or HDMI 1
It may also work on other DSI displays with some or all functionality

VenusOS already includes much of the support for the RPI display
    the touch screen calibration included in the image appears to work fine
        even if the display is rotated 180 degrees
    the backlight kernal module appears to be in place

This script adds:
    screensaver (blanking) and brightness control from Venus GUI
    activating a local GUI

Do NOT install this package if you do not want a local display (run Venus "headless")


This script should be run manually initally.
It will then called from reinstallMods to reinstall functionality after a Venus update

The script asks for the display type / HDMI port (0 is closest to the power connector)
which controls which display the GUI attempts to control for screen saver and dimming

Only the RPI touchscreen supports dimming (other DSI displays might also)
while HDMI does not support any dimming mechanism.

Some HDMI displays have no backlight control. In this case the screen will go black 
but may still glow if backlight remains on

Setup:

The easiest way to install this code IF the Venus device has internet access is to run the following command:

wget -qO - https://github.com/kwindrem/RpiDisplaySetup/archive/current.tar.gz | tar -xzf - -C /data
mv /data/RpiDisplaySetup-current /data/RpiDisplaySetup

If not, do the following a computer that does have internet access

click on this link in a web browser:
https://github.com/kwindrem/RpiDisplaySetup/archive/current.tar.gz

rename the resulting .tar.gz file to venus-data.tar.gz
copy the venus-data.tar.gz to a USB stick,
put the stick in the Venus device and reboot.
When Venus boots, it will unarchive the file to /data/RpiDisplaySetup-current

mv /data/RpiDisplaySetup-current /data/RpiDisplaySetup


You must also install SetupHelper

wget -qO - https://github.com/kwindrem/SetupHelper/archive/current.tar.gz | tar -xzf - -C /data
mv /data/SetupHelper-current /data/SetupHelper

or click on this link in a web browser:

https://github.com/kwindrem/SetupHelper/archive/current.tar.gz
mv current.tar.gz SetupHelper.tar.gz

rename the resulting .tar.gz file to venus-data.tar.gz
copy the venus-data.tar.gz to a USB stick,
put the stick in the Venus device and reboot.

mv /data/SetupHelper-current /data/SetupHelper

Note, you must do RpiDisplaySetup and SetupHelper on a separate flash drive since they use
the same file name on the flash drive.

If you are installing multiple packages, SetupHelper need only be installed once.

Once both packages are installed run setup and follow the prompts.
/data/RpiDisplaySetup/setup

You will need root access to the Venus device. Instructions can be found here:
https://www.victronenergy.com/live/ccgx:root_access
The root password needs to be reentered following a Venus update.
Setting up an authorization key (see documentation referenced above) will save time and avoid having to reset the root password after each update.

